<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.7.1 at 2018-11-09 15:42 
 | Rendered using Apache Maven Fluido Skin 1.5
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20181109" />
    <meta http-equiv="Content-Language" content="en" />
    <title>OakPAL - Core &#x2013; The Basic Checklist</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.5.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.5.min.js"></script>

                  <!-- Google Analytics -->
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-37073514-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
          </head>
        <body class="topBarDisabled">
          
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                                  <a href="../index.html" id="bannerLeft">
                <h2>OakPAL - Oak Package Acceptance Library</h2>
                </a>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
              
                  <li id="publishDate">Last Published: 2018-11-09 15:42
                      <span class="divider">|</span>
                   </li>
                  <li id="projectVersion">Version: 1.0.1
                      </li>
                      
              
      
                                    
    <li class="pull-right">
        <span class="divider">|</span>
                      <a href="http://wiki.github.com/adamcin/oakpal/frequently-asked-questions" class="externalLink" title="FAQ">
        FAQ</a>
      </li>

  
    <li class="pull-right">
                      <a href="http://wiki.github.com/adamcin/oakpal/" class="externalLink" title="Wiki">
        Wiki</a>
      </li>

                    </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
              
                <ul class="nav nav-list">
                    <li class="nav-header">Overview</li>
                              
      <li>
  
                          <a href="index.html" title="Introduction">
          <span class="none"></span>
        Introduction</a>
            </li>
                
      <li>
  
                          <a href="apidocs/index.html" title="JavaDocs">
          <span class="none"></span>
        JavaDocs</a>
            </li>
                
      <li class="active">
  
            <a href="#"><span class="none"></span>Publishing a Checklist</a>
          </li>
                
      <li>
  
                          <a href="the-basic-checklist.html" title="The Basic Checklist">
          <span class="none"></span>
        The Basic Checklist</a>
            </li>
                                        <li class="nav-header">Resources @ Github</li>
                              
      <li>
  
                          <a href="https://github.com/adamcin/oakpal" class="externalLink" title="Get the Source">
          <span class="none"></span>
        Get the Source</a>
            </li>
                
      <li>
  
                          <a href="https://github.com/adamcin/oakpal/issues" class="externalLink" title="Report Issues">
          <span class="none"></span>
        Report Issues</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                                                                                                                                                                      
      <li>
  
                          <a href="project-info.html" title="Project Information">
          <span class="icon-chevron-right"></span>
        Project Information</a>
                  </li>
                                                                                    
      <li>
  
                          <a href="project-reports.html" title="Project Reports">
          <span class="icon-chevron-right"></span>
        Project Reports</a>
                  </li>
            </ul>
              
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                   
        
        
        
    <iframe src="https://www.facebook.com/plugins/like.php?href=http://adamcin.net/oakpal/oakpal-core&send=false&layout=box_count&show-faces=false&action=like&colorscheme=light"
        scrolling="no" frameborder="0"
        style="border:none; width:48px; height:63px; margin-top: 10px;" ></iframe>
               <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                                                                                                                   <a href="http://maven.apache.org" title="Build with Maven" class="builtBy">
        <img class="builtBy"  alt="Build with Maven" src="http://maven.apache.org/images/logos/maven-feather.png"    />
      </a>
                      </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span10" >
                                  
            
    
        <h1>The Basic Checklist</h1>
        
<div class="section">
<h2><a name="How_Checklists_are_Discovered"></a>How Checklists are Discovered</h2>
            
<p>
                OakPAL Checklists are discovered by scanning MANIFEST.MF files on the classpath for
                <tt>Oakpal-Checklist</tt> headers, which each define a comma-separated lists of JAR-relative
                resource paths. The MANIFEST.MF should also use a <tt>Bundle-SymbolicName</tt> or
                <tt>Automatic-Module-Name</tt> header to declare a module name for its exported checklists.
            </p>
            
<p>For example, the oakpal-core jar exports a single checklist,
                <tt>
                    <a class="externalLink" href="https://github.com/adamcin/oakpal/blob/master/core/src/main/resources/OAKPAL-INF/checklists/basic.json">
                        OAKPAL-INF/checklists/basic.json
                    </a>
                </tt>
                checklist, and identifies itself as
                <tt>net.adamcin.oakpal.core</tt>, in
                <a class="externalLink" href="https://github.com/adamcin/oakpal/blob/master/core/src/main/resources/META-INF/MANIFEST.MF">
                    META-INF/MANIFEST.MF</a>.
            </p>
            
<p>
                Discovered checklists are referenceable by <tt>module/name</tt>, as in
                <tt>net.adamcin.oakpal.core/basic</tt>, or for shorthand, just <tt>name</tt>, as in
                <tt>basic</tt>. Shorthand is matched according to the order of checklist discovery on the classpath.
            </p>
        </div>
        
<div class="section">
<h2><a name="The_Structure_of_a_Checklist"></a>The Structure of a Checklist</h2>
            
<p>Checklists are json files that match the basic structure of this example:</p>
            
<div class="source">

<div>
<pre>
{
    &quot;name&quot;: &quot;acmeAemChecks&quot;,
    &quot;cndNames&quot;: [
        &quot;OAKPAL-INF/nodetypes/acme.cnd&quot;
    ],
    &quot;jcrNamespaces&quot;: [
        {
            &quot;prefix&quot;: &quot;sling&quot;,
            &quot;uri&quot;: &quot;http://sling.apache.org/jcr/sling/1.0&quot;
        }
    ],
    &quot;jcrPrivileges&quot;: [
        &quot;acme:distributeRedditGold&quot;
    ],
    &quot;forcedRoots: [
        {
            &quot;path&quot;: &quot;/content/acme&quot;,
            &quot;primaryType&quot;: &quot;sling:Folder&quot;,
            &quot;mixinTypes&quot;: []
        }
    ],
    &quot;checks&quot;: [
        {
            &quot;name&quot;: &quot;require-acme-metadata&quot;,
            &quot;impl&quot;: &quot;com.example.acme.oakpal.checks.RequireAcmeMetadataCheck&quot;
        },
        {
            &quot;name&quot;: &quot;OSGi Configs Check&quot;,
            &quot;impl&quot;: &quot;com.example.acme.oakpal.checks.OsgiConfigsProgressCheckFactory&quot;,
            &quot;config&quot;: {
                &quot;installerPaths&quot;: [&quot;/libs&quot;,&quot;/apps&quot;]
            }
        },
        {
            &quot;name&quot;: &quot;No embedded clientlibs&quot;,
            &quot;impl&quot;: &quot;OAKPAL-INF/checks/noClientLibEmbed.js&quot;,
            &quot;config&quot;: {
                &quot;allow&quot;: true,
                &quot;boo&quot;: false
            }
        }
    ]
}
</pre></div>
            </div>
            
<p>
                A checklist basically has a <tt>name</tt> and a list of <tt>checks</tt>, which represent
                <tt>CheckSpecs</tt>. Each check spec must have at least a <tt>name</tt>, and an
                <tt>impl</tt>
                representing a className of a <tt>ProgressCheckFactory</tt> or
                <tt>ProgressCheck</tt>
                implementation, or a classpath resource name to locate a script progress check. For script checks and
                <tt>ProgressCheckFactory</tt>
                implementations, you can specify an optional <tt>config</tt> object to
                serve as a default configuration when this check spec is loaded.
            </p>
            
<p>
                A checklist may also specify a few optional properties that the <tt>OakMachine</tt> can load before each
                scan as an <tt>InitStage</tt>. When the checklist is actively selected in the maven plugin, these resources
                will be used to to initialize the repository to a state that serves as a starting context for checks.
            </p>
            
<dl>
                
<dt><tt>cndNames</tt></dt>
                
<dl>Specify an array of CND (compact nodetype definition) files that should be installed in the repository
                    prior to the scan</dl>
                
<dt><tt>jcrNamespaces</tt></dt>
                
<dd>Specify a list of JCR namespace prefix-to-uri mappings in order to register new ones, or to remap
                    a registered namespace to a different prefix in the scan session.</dd>
                
<dt><tt>jcrPrivileges</tt></dt>
                
<dd>Register a list of JCR privileges to support the installation of rep:policy nodes that reference
                    them.</dd>
                
<dt><tt>forcedRoots</tt></dt>
                
<dd>Specify a list of root paths to create (akin to using <tt>mkdir -p</tt>), and optionally specify a
                    primary type and/or a list of mixin types to apply to the leaf node. Intermediate paths will be
                    created as <tt>nt:unstructured</tt> nodes.</dd>
            </dl>
            
<p>For a real example, refer to the <a href="the-basic-checklist.html">the basic checklist</a>.
            </p>
        </div>
    

                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                                      <p >Copyright &copy;                   2017&#x2013;2018.
          All rights reserved.    
      </p>
                </div>

        
                </div>
    </footer>
        </body>
</html>
